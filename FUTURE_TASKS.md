# 향후 추가 기능 및 개선 사항

현재 버전: **1.0.2+10**

## 우선순위 분류
- 🔴 **High**: 핵심 기능, 사용자 경험에 직접적 영향
- 🟡 **Medium**: 편의성 향상, 부가 기능
- 🟢 **Low**: Nice-to-have, 장기적 개선

---

## 1. 핵심 기능 추가 (Core Features)

### 🔴 1.1 Todo 편집 기능 ✅
**현재 상태**: ~~Todo 생성, 삭제, 완료/미완료 토글만 가능~~ **완료됨 (2025-11-10)**
**완료된 작업**:
- [x] Todo 수정 다이얼로그 추가
- [x] 기존 Todo 정보 폼에 자동 입력
- [x] 제목, 설명, 마감일, 알림 시간, 카테고리 수정 가능
- [x] 로컬 DB 및 Supabase 동시 업데이트

**예상 작업 시간**: 2-3시간
**파일 수정**:
- `lib/presentation/widgets/todo_form_dialog.dart` (수정 모드 추가)
- `lib/presentation/providers/todo_providers.dart` (updateTodo 액션)
- `lib/data/repositories/todo_repository_impl.dart`

---

### 🔴 1.2 반복 Todo (Recurring Tasks)
**설명**: 매일, 매주, 매월 반복되는 할 일 설정
**필요 작업**:
- [ ] Todo 엔티티에 `recurrenceRule` 필드 추가 (RRULE 형식)
- [ ] 반복 설정 UI (주기, 요일, 종료일 선택)
- [ ] 반복 Todo 자동 생성 로직 (백그라운드 작업)
- [ ] 반복 시리즈 관리 (개별 인스턴스 vs 전체 시리즈 수정/삭제)

**예상 작업 시간**: 1-2일
**기술 고려사항**:
- `rrule` 패키지 사용
- 백그라운드 작업: `workmanager` 또는 `alarm` 패키지

---

### 🟡 1.3 서브태스크 (Subtasks)
**설명**: Todo 내부에 체크리스트 형태의 하위 작업 추가
**필요 작업**:
- [ ] Subtask 엔티티 생성 (`parent_todo_id` 외래키)
- [ ] Todo 상세 화면에 서브태스크 목록 표시
- [ ] 서브태스크 CRUD 기능
- [ ] 서브태스크 완료율 계산 및 표시
- [ ] Supabase RLS 정책 추가

**예상 작업 시간**: 1일
**DB 스키마**:
```sql
CREATE TABLE subtasks (
  id BIGSERIAL PRIMARY KEY,
  todo_id BIGINT REFERENCES todos(id) ON DELETE CASCADE,
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,
  title TEXT NOT NULL,
  is_completed BOOLEAN DEFAULT false,
  position INT NOT NULL,
  created_at TIMESTAMPTZ DEFAULT NOW()
);
```

---

### 🟡 1.4 첨부파일 지원
**설명**: Todo에 이미지, 문서 파일 첨부
**필요 작업**:
- [ ] Supabase Storage 버킷 생성 및 RLS 설정
- [ ] 파일 선택 UI (`image_picker`, `file_picker`)
- [ ] 파일 업로드/다운로드 로직
- [ ] 첨부파일 썸네일 표시
- [ ] 파일 삭제 및 용량 제한 관리

**예상 작업 시간**: 1-2일
**기술 스택**: `image_picker`, `file_picker`, Supabase Storage

---

## 2. 데이터 관리 및 동기화

### 🔴 2.1 백업 및 복원 기능 구현
**현재 상태**: 설정 화면에 UI만 존재, 실제 기능 없음
**필요 작업**:
- [ ] JSON 형식으로 모든 데이터 내보내기 (todos, categories, settings)
- [ ] 파일 시스템에 저장 또는 클라우드 업로드 (Supabase Storage)
- [ ] JSON 파일에서 데이터 복원
- [ ] 기존 데이터와 충돌 처리 로직 (덮어쓰기 vs 병합)
- [ ] 백업 자동화 옵션 (매주, 매월)

**예상 작업 시간**: 4-6시간
**파일 수정**:
- `lib/presentation/screens/settings_screen.dart`
- 새 파일: `lib/core/services/backup_service.dart`

---

### 🟡 2.2 오프라인 모드 개선
**현재 상태**: Drift로 로컬 저장, 온라인 시 Supabase 동기화
**개선 사항**:
- [ ] 오프라인 상태 감지 UI 표시
- [ ] 동기화 충돌 해결 전략 구현 (Last-Write-Wins vs Manual Merge)
- [ ] 동기화 실패 시 재시도 로직
- [ ] 동기화 상태 표시 (마지막 동기화 시간)

**예상 작업 시간**: 6-8시간

---

### 🟢 2.3 데이터 내보내기 (CSV, PDF)
**설명**: Todo 목록을 CSV 또는 PDF로 내보내기
**필요 작업**:
- [ ] CSV 생성 로직 (`csv` 패키지)
- [ ] PDF 생성 로직 (`pdf` 패키지)
- [ ] 내보내기 옵션 UI (전체 vs 필터링된 항목)
- [ ] 파일 공유 기능 (`share_plus`)

**예상 작업 시간**: 4-6시간

---

## 3. 알림 및 스케줄링

### 🔴 3.1 스누즈 기능
**설명**: 알림을 특정 시간만큼 미루기
**필요 작업**:
- [ ] 알림 액션 버튼에 "5분 후", "1시간 후", "내일" 옵션 추가
- [ ] 스누즈된 알림 재스케줄링
- [ ] 스누즈 히스토리 저장

**예상 작업 시간**: 3-4시간
**파일 수정**: `lib/core/services/notification_service.dart`

---

### 🟡 3.2 위치 기반 알림
**설명**: 특정 장소 도착 시 알림
**필요 작업**:
- [ ] 위치 권한 요청
- [ ] Geofencing 설정 (`geolocator`, `flutter_geofence`)
- [ ] 위치 선택 UI (지도 또는 주소 검색)
- [ ] 백그라운드 위치 추적

**예상 작업 시간**: 2-3일
**기술 고려사항**: 배터리 소모 최적화 필요

---

### 🟢 3.3 알림 우선순위 설정
**설명**: Todo 중요도에 따라 알림 방식 차별화
**필요 작업**:
- [ ] Todo에 `priority` 필드 추가 (High, Medium, Low)
- [ ] 우선순위별 알림 채널 설정 (소리, 진동 패턴)
- [ ] 우선순위 UI (색상 코드, 아이콘)

**예상 작업 시간**: 4-6시간

---

## 4. 사용자 경험 개선

### 🔴 4.1 검색 기능
**설명**: 제목, 설명, 카테고리로 Todo 검색
**필요 작업**:
- [ ] 검색 바 UI 추가 (Todo 목록 상단)
- [ ] 실시간 검색 기능 (debounce 적용)
- [ ] 검색 히스토리 저장 및 자동완성
- [ ] 고급 검색 (날짜 범위, 완료 여부, 카테고리 필터)

**예상 작업 시간**: 4-6시간
**파일 수정**:
- `lib/presentation/screens/todo_list_screen.dart`
- `lib/presentation/providers/todo_providers.dart`

---

### 🟡 4.2 드래그 앤 드롭 정렬
**설명**: Todo 순서를 드래그로 변경
**필요 작업**:
- [ ] `ReorderableListView` 사용
- [ ] Todo에 `position` 필드 추가
- [ ] 순서 변경 시 DB 업데이트
- [ ] 카테고리별 독립적 정렬

**예상 작업 시간**: 3-4시간

---

### 🟡 4.3 테마 커스터마이징
**현재 상태**: 다크/라이트 모드만 지원
**개선 사항**:
- [ ] 커스텀 색상 테마 선택 (블루, 그린, 퍼플 등)
- [ ] 다크/라이트 모드별 개별 색상 설정
- [ ] 폰트 크기 조절
- [ ] 설정 화면에 테마 미리보기

**예상 작업 시간**: 6-8시간
**파일 수정**:
- `lib/core/theme/app_colors.dart`
- `lib/presentation/providers/theme_provider.dart`

---

### 🟢 4.4 위젯 (홈 화면 위젯)
**설명**: 앱 실행 없이 홈 화면에서 Todo 확인
**필요 작업**:
- [ ] Android 위젯 구현 (`home_widget`)
- [ ] iOS 위젯 구현 (WidgetKit)
- [ ] 위젯에서 Todo 완료 토글 기능
- [ ] 위젯 사이즈 옵션 (small, medium, large)

**예상 작업 시간**: 3-5일
**기술 스택**: `home_widget` 패키지

---

## 5. 협업 및 공유

### 🟡 5.1 Todo 공유
**설명**: 특정 Todo를 다른 사용자와 공유
**필요 작업**:
- [ ] 공유 링크 생성 (딥링크)
- [ ] 공유된 Todo 읽기 전용 뷰
- [ ] 공유 권한 설정 (읽기 vs 편집)
- [ ] Supabase RLS 정책 수정

**예상 작업 시간**: 1-2일
**기술 스택**: `uni_links` 또는 `app_links`

---

### 🟢 5.2 팀 협업 기능
**설명**: 여러 사용자가 같은 Todo 목록 공동 작업
**필요 작업**:
- [ ] 워크스페이스 개념 도입
- [ ] 사용자 초대 시스템
- [ ] 실시간 협업 (Supabase Realtime)
- [ ] 역할 기반 권한 (Owner, Editor, Viewer)
- [ ] 활동 로그 (누가 언제 무엇을 변경했는지)

**예상 작업 시간**: 1-2주
**DB 스키마**: `workspaces`, `workspace_members`, `permissions` 테이블 추가

---

## 6. 통계 및 분석

### 🟡 6.1 통계 화면 개선
**현재 상태**: 기본적인 통계만 표시
**개선 사항**:
- [ ] 주간/월간/연간 완료율 추이 그래프
- [ ] 카테고리별 시간 투자 분석
- [ ] 생산성 리포트 (가장 생산적인 시간대, 요일)
- [ ] 목표 설정 및 달성률 추적

**예상 작업 시간**: 1-2일
**기술 스택**: `fl_chart` 패키지

---

### 🟢 6.2 타임 트래킹
**설명**: Todo별 작업 시간 측정
**필요 작업**:
- [ ] 타이머 기능 (시작/일시정지/종료)
- [ ] 타임 엔트리 저장 (시작 시간, 종료 시간, 소요 시간)
- [ ] Todo별 총 작업 시간 표시
- [ ] 일일/주간 작업 시간 리포트

**예상 작업 시간**: 1-2일
**DB 스키마**: `time_entries` 테이블 추가

---

## 7. 인증 및 계정 관리

### 🔴 7.1 Apple 로그인 추가
**설명**: iOS 앱 스토어 요구사항 충족
**필요 작업**:
- [ ] Supabase Apple OAuth 설정
- [ ] Apple Developer 계정 설정
- [ ] 로그인 화면에 Apple 로그인 버튼 추가
- [ ] iOS에서만 Apple 로그인 버튼 표시

**예상 작업 시간**: 4-6시간
**파일 수정**: `lib/presentation/screens/stylish_login_screen.dart`

---

### 🟡 7.2 프로필 관리
**설명**: 사용자 프로필 사진, 이름 변경
**필요 작업**:
- [ ] 프로필 편집 화면 추가
- [ ] 프로필 사진 업로드 (Supabase Storage)
- [ ] 닉네임 변경
- [ ] Supabase Auth 메타데이터 업데이트

**예상 작업 시간**: 4-6시간
**파일 추가**: `lib/presentation/screens/profile_edit_screen.dart`

---

### 🟢 7.3 계정 삭제
**설명**: 사용자가 계정 및 모든 데이터 삭제
**필요 작업**:
- [ ] 계정 삭제 UI (설정 화면)
- [ ] 확인 다이얼로그 (비밀번호 재입력)
- [ ] Supabase Auth 계정 삭제 (CASCADE로 todos, categories 자동 삭제)
- [ ] 로컬 DB 초기화

**예상 작업 시간**: 3-4시간

---

## 8. 성능 및 안정성

### 🔴 8.1 에러 로깅 및 크래시 리포팅
**필요 작업**:
- [ ] `firebase_crashlytics` 또는 `sentry_flutter` 통합
- [ ] 전역 에러 핸들러 추가
- [ ] 네트워크 에러 재시도 로직
- [ ] 사용자 친화적 에러 메시지

**예상 작업 시간**: 4-6시간

---

### 🟡 8.2 성능 최적화
**필요 작업**:
- [ ] 이미지 캐싱 (`cached_network_image`)
- [ ] 리스트 가상화 (이미 `ListView.builder` 사용 중)
- [ ] Riverpod provider 최적화 (불필요한 rebuild 방지)
- [ ] Bundle 크기 최적화

**예상 작업 시간**: 지속적

---

### 🟡 8.3 테스트 커버리지 증가
**현재 상태**: 기본 위젯 테스트만 존재
**필요 작업**:
- [ ] 유닛 테스트 작성 (repositories, providers)
- [ ] 위젯 테스트 확대 (모든 주요 화면)
- [ ] 통합 테스트 작성
- [ ] CI/CD에 자동 테스트 통합

**예상 작업 시간**: 지속적

---

## 9. 접근성 및 국제화

### 🟡 9.1 접근성 개선
**필요 작업**:
- [ ] 스크린 리더 지원 (Semantics 위젯)
- [ ] 키보드 내비게이션
- [ ] 고대비 모드
- [ ] 폰트 크기 조절 대응

**예상 작업 시간**: 1-2일

---

### 🟡 9.2 추가 언어 지원
**현재 상태**: 한국어, 영어만 지원
**추가 언어**: 일본어, 중국어(간체/번체), 스페인어 등
**필요 작업**:
- [ ] 번역 파일 추가 (`assets/translations/`)
- [ ] 번역 크라우드소싱 또는 전문 번역
- [ ] 언어 선택 UI (설정 화면)

**예상 작업 시간**: 언어당 4-6시간

---

## 10. 마케팅 및 수익화

### 🟢 10.1 프리미엄 기능 (In-App Purchase)
**설명**: 무료 + 프리미엄 모델
**무료 기능**: 기본 Todo, 알림, 카테고리
**프리미엄 기능**:
- 무제한 첨부파일
- 고급 통계
- 커스텀 테마
- 백업 자동화
- 광고 제거

**필요 작업**:
- [ ] `in_app_purchase` 패키지 통합
- [ ] App Store / Play Store 인앱 상품 설정
- [ ] 프리미엄 상태 관리 (Supabase 또는 로컬)
- [ ] 페이월 UI

**예상 작업 시간**: 1-2주

---

### 🟢 10.2 광고 통합 (AdMob)
**필요 작업**:
- [ ] `google_mobile_ads` 패키지 통합
- [ ] 배너 광고 (Todo 목록 하단)
- [ ] 전면 광고 (특정 액션 후)
- [ ] 프리미엄 사용자는 광고 제거

**예상 작업 시간**: 4-6시간

---

## 11. 플랫폼별 최적화

### 🟡 11.1 iPad / 태블릿 레이아웃
**필요 작업**:
- [ ] 반응형 레이아웃 (split view)
- [ ] 태블릿 전용 내비게이션 (drawer vs bottom nav)
- [ ] 멀티 윈도우 지원

**예상 작업 시간**: 1-2일

---

### 🟢 11.2 웹 앱 최적화
**현재 상태**: 모바일 우선 디자인
**필요 작업**:
- [ ] 데스크톱 레이아웃 개선
- [ ] 키보드 단축키 (Ctrl+N: 새 Todo, etc.)
- [ ] PWA 매니페스트 최적화
- [ ] SEO 메타 태그

**예상 작업 시간**: 2-3일

---

## 12. 개발자 경험 개선

### 🟡 12.1 CI/CD 파이프라인
**필요 작업**:
- [ ] GitHub Actions 설정
- [ ] 자동 빌드 및 테스트
- [ ] 자동 배포 (App Store, Play Store)
- [ ] 버전 관리 자동화

**예상 작업 시간**: 1-2일

---

### 🟢 12.2 문서화
**필요 작업**:
- [ ] 코드 주석 추가
- [ ] API 문서 자동 생성 (`dartdoc`)
- [ ] 아키텍처 다이어그램
- [ ] 기여 가이드라인

**예상 작업 시간**: 지속적

---

## 우선순위 로드맵

### Phase 1 (1-2개월) - MVP 완성
- ✅ Todo 편집 기능 (1.1)
- ✅ 백업 및 복원 (2.1)
- ✅ 검색 기능 (4.1)
- ✅ Apple 로그인 (7.1)
- ✅ 에러 로깅 (8.1)

### Phase 2 (3-4개월) - 사용성 향상
- 반복 Todo (1.2)
- 서브태스크 (1.3)
- 스누즈 기능 (3.1)
- 통계 개선 (6.1)
- 프로필 관리 (7.2)

### Phase 3 (5-6개월) - 고급 기능
- 첨부파일 (1.4)
- 위치 기반 알림 (3.2)
- 테마 커스터마이징 (4.3)
- Todo 공유 (5.1)
- 타임 트래킹 (6.2)

### Phase 4 (7개월+) - 확장 및 수익화
- 팀 협업 (5.2)
- 홈 화면 위젯 (4.4)
- 프리미엄 기능 (10.1)
- 추가 언어 지원 (9.2)

---

## 기술 부채 및 리팩토링

### 현재 알려진 이슈
1. **알림 서비스 안정성**: 삼성 기기에서 간헐적 크래시 (이미 수정됨)
2. **OAuth 리다이렉트**: 웹에서 Kakao OAuth 후 자동 닫힘 필요
3. **오프라인 동기화**: 충돌 해결 전략 미흡

### 리팩토링 필요 영역
- `todo_list_screen.dart`: 복잡도 높음, 위젯 분리 필요
- `notification_service.dart`: 플랫폼별 분기 많음, 추상화 필요
- 테스트 커버리지 낮음: 현재 5% 미만

---

## 참고 사항

### 의존성 업데이트 필요
현재 `pubspec.yaml`에서 39개 패키지가 최신 버전과 호환되지 않음.
주요 패키지 업데이트 계획:
- `go_router`: 14.8.1 → 17.0.0
- `flutter_local_notifications`: 18.0.1 → 19.5.0
- `google_sign_in`: 6.3.0 → 7.2.0

**주의**: 메이저 버전 업데이트 시 breaking changes 확인 필요

---

## 기여 방법

새로운 기능을 추가하거나 개선 사항을 제안하고 싶다면:
1. 이 문서에 기능 추가 후 PR 생성
2. GitHub Issues에 Feature Request 등록
3. 우선순위 투표 참여

**문서 업데이트**: 2025-11-10
