# 향후 추가 기능 및 개선 사항

현재 버전: **1.0.11+35**
최종 업데이트: **2025-11-18**

## 우선순위 분류
- 🔴 **High**: 핵심 기능, 사용자 경험에 직접적 영향
- 🟡 **Medium**: 편의성 향상, 부가 기능
- 🟢 **Low**: Nice-to-have, 장기적 개선

---

## ✅ 완료된 작업 (Completed)

### 2025-11-19
- ✅ **주소 검색 API 전환** (Naver Geocoding → Google Geocoding)
  - Naver Geocoding API 모바일 앱 401 에러 해결
  - Google Geocoding (geocoding 패키지) 사용으로 전환
  - Naver Reverse Geocoding 추가 (좌표 → 한국어 주소)
  - 5단계 검색 전략 구현 (fallback 패턴)
- ✅ **국제화(i18n) 번역 키 추가**
  - 하드코딩된 한글 텍스트용 번역 키 추가 (40개 이상)
  - 에러 메시지, UI 레이블, 알림 텍스트 등
  - 향후 완전한 다국어 지원을 위한 준비 작업

### 2025-11-18
- ✅ **Naver Maps 통합 완료** (Google Maps → Naver Maps 마이그레이션)
  - 지도 API 전환, 주소 역지오코딩, 위치 검색
- ✅ **카테고리 Supabase 동기화 구현** (앱 재설치 후 데이터 복원)
  - `getCategories()` 시 Supabase에서 자동 동기화
  - 로컬 DB 없어도 클라우드에서 복원

### 2025-11-17
- ✅ **서브태스크 기능 완전 구현** (1.4)
  - Subtask 엔티티, Repository, Provider
  - Todo 상세 화면에 서브태스크 CRUD
  - Supabase 마이그레이션 SQL
- ✅ **알림 스누즈 기능 완전 구현** (3.1)
  - SnoozeDialog, NotificationService 통합
  - 5분/10분/30분/1시간/3시간 + 커스텀
- ✅ **GitHub Actions 테스트 수정**
  - Widget test 번역 의존성 제거
  - 128개 테스트 통과
- ✅ **Google Play 업로드 키 재설정 요청** (14.1)
  - AAB 빌드 1.0.11+35

### 2025-11-13
- ✅ **CI/CD 파이프라인 구축** (12.1)
  - GitHub Actions, Codecov 통합
- ✅ **통합 테스트 추가** (9.2)
  - TodoActions CRUD 통합 테스트 (9개)
  - 총 137개 테스트, 18-19% 커버리지
- ✅ **백업 및 복원 기능** (2.1)
  - JSON 백업/복원, share_plus 통합
- ✅ **검색 기능** (4.1)
  - 실시간 검색, debounce 적용
- ✅ **Apple 로그인** (7.1)
  - iOS OAuth 연동
- ✅ **에러 로깅** (8.1)
  - ErrorHandler, Failure 클래스 계층 구조

### 2025-11-10 이전
- ✅ **Todo 편집 기능** (1.1)
  - Todo 수정 다이얼로그, 로컬/Supabase 동시 업데이트
- ✅ **반복 Todo (Recurring Tasks)** (1.3)
  - RRULE 형식, 반복 설정 UI
  - RecurringTodoService, RecurrenceSettingsDialog

---

## 🚧 진행 중 작업 (In Progress)

### 🔴 3.2 위치 기반 알림 (Phase 3-4 남음)
**현재 상태**: Phase 1-2 완료, Phase 3 수동 작업 필요

**완료된 작업**:
- ✅ Phase 1: Infrastructure (DB, Repository, LocationService)
- ✅ Phase 2: UI Integration (LocationPickerDialog, Todo Form)
- ✅ Phase 3: Google Maps API 인프라 구축

**남은 작업 (Phase 3 - 사용자 수동 작업 필요)**:
- [ ] Google Cloud Console에서 API 키 발급
- [ ] `android/local.properties` 파일 생성 및 API 키 입력
- [ ] Supabase에서 location migration SQL 실행

**남은 작업 (Phase 4 - 향후 구현)**:
- [ ] Geofencing 백그라운드 모니터링 (geofence_service_flutter)
- [ ] 위치 도달 시 알림 트리거
- [ ] iOS 권한 설정 (Info.plist)
- [ ] 배터리 최적화

**참고 문서**:
- `GOOGLE_MAPS_SETUP.md` - Google Maps API 상세 가이드
- `LOCATION_SETUP_GUIDE.md` - 전체 설정 가이드

---

### 🔴 14.1 업로드 키 재설정 (Google Play)
**현재 상태**: 요청 제출 완료, 승인 대기 중

**완료된 작업**:
- ✅ 원본 APK 추출 및 서명 정보 확인
- ✅ 새 업로드 키스토어 생성
- ✅ PEM 인증서 파일 생성
- ✅ Google Play Console에 재설정 요청 제출
- ✅ 새 키로 AAB 빌드 (1.0.11+35-FINAL.aab)

**다음 단계**:
- [ ] Google 승인 대기 (1-2일 예상)
- [ ] 승인 후 AAB 업로드

---

## 📋 향후 작업 (Upcoming Tasks)

### 1. 핵심 기능 추가 (Core Features)

#### 🟡 1.5 첨부파일 지원
**설명**: Todo에 이미지, 문서 파일 첨부
**필요 작업**:
- [ ] Supabase Storage 버킷 생성 및 RLS 설정
- [ ] 파일 선택 UI (`image_picker`, `file_picker`)
- [ ] 파일 업로드/다운로드 로직
- [ ] 첨부파일 썸네일 표시
- [ ] 파일 삭제 및 용량 제한 관리

**예상 작업 시간**: 1-2일

---

### 2. 데이터 관리 및 동기화

#### 🟡 2.2 오프라인 모드 개선
**현재 상태**: Drift로 로컬 저장, 온라인 시 Supabase 동기화
**개선 사항**:
- [ ] 오프라인 상태 감지 UI 표시
- [ ] 동기화 충돌 해결 전략 구현 (Last-Write-Wins vs Manual Merge)
- [ ] 동기화 실패 시 재시도 로직
- [ ] 동기화 상태 표시 (마지막 동기화 시간)

**예상 작업 시간**: 6-8시간

---

#### 🟢 2.3 데이터 내보내기 (CSV, PDF)
**설명**: Todo 목록을 CSV 또는 PDF로 내보내기
**필요 작업**:
- [ ] CSV 생성 로직 (`csv` 패키지)
- [ ] PDF 생성 로직 (`pdf` 패키지)
- [ ] 내보내기 옵션 UI (전체 vs 필터링된 항목)
- [ ] 파일 공유 기능 (`share_plus`)

**예상 작업 시간**: 4-6시간

---

### 3. 알림 및 스케줄링

#### 🟢 3.3 알림 우선순위 설정
**설명**: Todo 중요도에 따라 알림 방식 차별화
**필요 작업**:
- [ ] Todo에 `priority` 필드 추가 (High, Medium, Low)
- [ ] 우선순위별 알림 채널 설정 (소리, 진동 패턴)
- [ ] 우선순위 UI (색상 코드, 아이콘)

**예상 작업 시간**: 4-6시간

---

### 4. 사용자 경험 개선

#### 🟡 4.2 드래그 앤 드롭 정렬
**설명**: Todo 순서를 드래그로 변경
**필요 작업**:
- [ ] `ReorderableListView` 사용
- [ ] Todo에 `position` 필드 추가
- [ ] 순서 변경 시 DB 업데이트
- [ ] 카테고리별 독립적 정렬

**예상 작업 시간**: 3-4시간

---

#### 🟡 4.3 테마 커스터마이징
**현재 상태**: 다크/라이트 모드만 지원
**개선 사항**:
- [ ] 커스텀 색상 테마 선택 (블루, 그린, 퍼플 등)
- [ ] 다크/라이트 모드별 개별 색상 설정
- [ ] 폰트 크기 조절
- [ ] 설정 화면에 테마 미리보기

**예상 작업 시간**: 6-8시간

---

#### 🟢 4.4 위젯 (홈 화면 위젯)
**설명**: 앱 실행 없이 홈 화면에서 Todo 확인
**필요 작업**:
- [ ] Android 위젯 구현 (`home_widget`)
- [ ] iOS 위젯 구현 (WidgetKit)
- [ ] 위젯에서 Todo 완료 토글 기능
- [ ] 위젯 사이즈 옵션 (small, medium, large)

**예상 작업 시간**: 3-5일

---

### 5. 협업 및 공유

#### 🟡 5.1 Todo 공유
**설명**: 특정 Todo를 다른 사용자와 공유
**필요 작업**:
- [ ] 공유 링크 생성 (딥링크)
- [ ] 공유된 Todo 읽기 전용 뷰
- [ ] 공유 권한 설정 (읽기 vs 편집)
- [ ] Supabase RLS 정책 수정

**예상 작업 시간**: 1-2일

---

#### 🟢 5.2 팀 협업 기능
**설명**: 여러 사용자가 같은 Todo 목록 공동 작업
**필요 작업**:
- [ ] 워크스페이스 개념 도입
- [ ] 사용자 초대 시스템
- [ ] 실시간 협업 (Supabase Realtime)
- [ ] 역할 기반 권한 (Owner, Editor, Viewer)
- [ ] 활동 로그

**예상 작업 시간**: 1-2주

---

### 6. 통계 및 분석

#### 🟡 6.1 통계 화면 개선
**현재 상태**: 기본적인 통계만 표시
**개선 사항**:
- [ ] 주간/월간/연간 완료율 추이 그래프
- [ ] 카테고리별 시간 투자 분석
- [ ] 생산성 리포트 (가장 생산적인 시간대, 요일)
- [ ] 목표 설정 및 달성률 추적

**예상 작업 시간**: 1-2일
**기술 스택**: `fl_chart` 패키지

---

#### 🟢 6.2 타임 트래킹
**설명**: Todo별 작업 시간 측정
**필요 작업**:
- [ ] 타이머 기능 (시작/일시정지/종료)
- [ ] 타임 엔트리 저장
- [ ] Todo별 총 작업 시간 표시
- [ ] 일일/주간 작업 시간 리포트

**예상 작업 시간**: 1-2일

---

### 7. 인증 및 계정 관리

#### 🟡 7.2 프로필 관리
**설명**: 사용자 프로필 사진, 이름 변경
**필요 작업**:
- [ ] 프로필 편집 화면 추가
- [ ] 프로필 사진 업로드 (Supabase Storage)
- [ ] 닉네임 변경
- [ ] Supabase Auth 메타데이터 업데이트

**예상 작업 시간**: 4-6시간

---

#### 🟢 7.3 계정 삭제
**설명**: 사용자가 계정 및 모든 데이터 삭제
**필요 작업**:
- [ ] 계정 삭제 UI (설정 화면)
- [ ] 확인 다이얼로그 (비밀번호 재입력)
- [ ] Supabase Auth 계정 삭제
- [ ] 로컬 DB 초기화

**예상 작업 시간**: 3-4시간

---

### 8. 성능 및 안정성

#### 🟡 8.2 성능 최적화
**필요 작업**:
- [ ] 이미지 캐싱 (`cached_network_image`)
- [ ] Riverpod provider 최적화 (불필요한 rebuild 방지)
- [ ] Bundle 크기 최적화

**예상 작업 시간**: 지속적

---

#### 🟡 8.3 테스트 커버리지 증가
**현재 상태**: 18-19% 커버리지 (137개 테스트)
**필요 작업**:
- [ ] 유닛 테스트 작성 (repositories, providers)
- [ ] 위젯 테스트 확대 (모든 주요 화면)
- [ ] 통합 테스트 추가
- [ ] E2E 테스트 (integration_test)

**예상 작업 시간**: 지속적

---

### 9. 접근성 및 국제화

#### 🟡 9.1 접근성 개선
**필요 작업**:
- [ ] 스크린 리더 지원 (Semantics 위젯)
- [ ] 키보드 내비게이션
- [ ] 고대비 모드
- [ ] 폰트 크기 조절 대응

**예상 작업 시간**: 1-2일

---

#### 🟡 9.2 하드코딩 한글 제거 (번역 키 사용)
**현재 상태**: 번역 키 40개 추가 완료 (2025-11-19)
**남은 작업**:
- [ ] `notification_service.dart` 수정 (알림 텍스트)
- [ ] `auth_repository_impl.dart` 수정 (에러 메시지)
- [ ] `supabase_datasource.dart` 수정 (에러 메시지)
- [ ] `register_screen.dart` 수정 (UI 레이블)
- [ ] `calendar_screen.dart` 수정 (UI 텍스트)
- [ ] `location_picker_dialog.dart` 수정 (검색 메시지)
- [ ] `web_notification_service.dart` 수정 (테스트 알림)

**예상 작업 시간**: 2-3시간

---

#### 🟡 9.3 추가 언어 지원
**현재 상태**: 한국어, 영어만 지원
**추가 언어**: 일본어, 중국어(간체/번체), 스페인어 등
**필요 작업**:
- [ ] 번역 파일 추가 (`assets/translations/`)
- [ ] 언어 선택 UI (설정 화면)
- [ ] 하드코딩 한글 제거 (9.2) 선행 필요

**예상 작업 시간**: 언어당 4-6시간

---

### 10. 마케팅 및 수익화

#### 🟢 10.1 프리미엄 기능 (In-App Purchase)
**설명**: 무료 + 프리미엄 모델
**프리미엄 기능**:
- 무제한 첨부파일
- 고급 통계
- 커스텀 테마
- 백업 자동화
- 광고 제거

**필요 작업**:
- [ ] `in_app_purchase` 패키지 통합
- [ ] App Store / Play Store 인앱 상품 설정
- [ ] 페이월 UI

**예상 작업 시간**: 1-2주

---

#### 🟢 10.2 광고 통합 (AdMob)
**필요 작업**:
- [ ] `google_mobile_ads` 패키지 통합
- [ ] 배너 광고, 전면 광고
- [ ] 프리미엄 사용자 광고 제거

**예상 작업 시간**: 4-6시간

---

### 11. 플랫폼별 최적화

#### 🟡 11.1 iPad / 태블릿 레이아웃
**필요 작업**:
- [ ] 반응형 레이아웃 (split view)
- [ ] 태블릿 전용 내비게이션
- [ ] 멀티 윈도우 지원

**예상 작업 시간**: 1-2일

---

#### 🟢 11.2 웹 앱 최적화
**필요 작업**:
- [ ] 데스크톱 레이아웃 개선
- [ ] 키보드 단축키
- [ ] PWA 매니페스트 최적화
- [ ] SEO 메타 태그

**예상 작업 시간**: 2-3일

---

### 12. 개발자 경험 개선

#### 🟢 12.2 문서화
**필요 작업**:
- [ ] 코드 주석 추가
- [ ] API 문서 자동 생성 (`dartdoc`)
- [ ] 아키텍처 다이어그램
- [ ] 기여 가이드라인

**예상 작업 시간**: 지속적

---

### 13. 데이터 프라이버시 및 보안

#### 🔴 13.1 관리자 데이터 접근 권한 관리
**문제**: Supabase 관리자가 사용자 개인 데이터 직접 접근 가능
**선택한 해결책**: 익명화된 통계 함수만 사용

**완료된 설계**:
- ✅ 익명화된 통계 함수 5개 설계
- ✅ SECURITY DEFINER 함수 설계
- ✅ Flutter 구현 예제 작성

**구현 필요 작업**:
- [ ] Supabase 콘솔에서 5개 SQL 함수 생성
- [ ] Flutter 관리자 대시보드 UI 구현
- [ ] 통계 데이터 시각화

**예상 작업 시간**: 4-6시간

---

## 📊 우선순위 로드맵

### Phase 1 (1-2개월) - MVP 완성 ✅ **완료됨**
- ✅ Todo 편집 기능
- ✅ 반복 Todo
- ✅ 백업 및 복원
- ✅ 검색 기능
- ✅ Apple 로그인
- ✅ 에러 로깅
- ✅ CI/CD 파이프라인
- ✅ 통합 테스트

### Phase 2 (3-4개월) - 사용성 향상 🚧
- ✅ 서브태스크 (완료)
- ✅ 스누즈 기능 (완료)
- 🚧 위치 기반 알림 (진행 중)
- 📋 통계 개선 (예정)
- 📋 프로필 관리 (예정)

### Phase 3 (5-6개월) - 고급 기능
- 첨부파일
- 테마 커스터마이징
- Todo 공유
- 타임 트래킹

### Phase 4 (7개월+) - 확장 및 수익화
- 팀 협업
- 홈 화면 위젯
- 프리미엄 기능
- 추가 언어 지원

---

## 🔧 기술 부채 및 리팩토링

### 현재 알려진 이슈
1. **OAuth 리다이렉트**: 웹에서 Kakao OAuth 후 자동 닫힘 필요
2. **오프라인 동기화**: 충돌 해결 전략 미흡
3. **Sentry 통합**: Kotlin 버전 충돌로 비활성화 상태

### 리팩토링 필요 영역
- `todo_list_screen.dart`: 복잡도 높음, 위젯 분리 필요
- `notification_service.dart`: 플랫폼별 분기 많음, 추상화 필요

---

## 📝 참고 사항

### 의존성 업데이트 필요
주요 패키지 업데이트 계획:
- `go_router`: 14.8.1 → 17.0.0
- `flutter_local_notifications`: 18.0.1 → 19.5.0
- `google_sign_in`: 6.3.0 → 7.2.0

**주의**: 메이저 버전 업데이트 시 breaking changes 확인 필요

---

## 🤝 기여 방법

새로운 기능을 추가하거나 개선 사항을 제안하고 싶다면:
1. 이 문서에 기능 추가 후 PR 생성
2. GitHub Issues에 Feature Request 등록
3. 우선순위 투표 참여

---

**문서 최종 업데이트**: 2025-11-18
